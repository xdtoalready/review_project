# Email-шаблон NPS опроса

Email-версия страницы NPS с табличной версткой для максимальной совместимости с почтовыми клиентами.

## Структура

```
email/
├── nps-email.html      # Основной шаблон письма
└── README.md           # Документация
```

## Технические требования

### Верстка
- **Тип**: Табличная верстка (`<table>`)
- **Ширина**: 600px (фиксированная)
- **Стили**: Inline CSS
- **Шрифт**: Helvetica, Arial, sans-serif (стандартные шрифты для email)

### Совместимость
Поддержка старых версий браузеров в email-клиентах:
- Chrome до 28
- Safari до 8
- Firefox до 27
- Opera до 16
- IE до 9

### Разрешенные CSS свойства
✅ `color`, `background-color`, `font-family`, `font-size`, `font-weight`, `text-align`, `line-height`, `width`, `height`, `max-width`, `padding`, `margin`, `border`, `border-collapse`, `border-radius`

### Запрещенные CSS свойства
❌ `position`, `float`, `display: flex/grid`, `transition`, `animation`, `box-shadow`, `text-shadow`, `background-image`

## Цветовая палитра

Цвета идентичны основному проекту:

| Назначение | HEX код |
|-----------|---------|
| Primary (кнопки) | `#FFDC83` |
| Текст основной | `#4A4953` |
| Текст вторичный | `#999999` |
| Фон | `#F5F5F5` |
| Белый фон блоков | `#FFFFFF` |
| Границы | `#CCCCCC` |
| Границы светлые | `#E6E6E6` |
| Ссылки | `#5B8DEF` |
| Градиент start | `#404D6C` |
| Градиент end | `#2F384F` |

## Структура письма

### 1. Шапка
- Логотип (слева)
- Заголовок "Отзывы" (справа, градиентный цвет)
- Фон: белый
- Отступы: 19px 32px
- Округление: 24px

### 2. Блок приветствия
- Текст: "Тимофей, благодарим за обращение в БВБ-Альянс. Нам важно ваше мнение о выполненной работе по заказу 12345"
- Шрифт: 18px
- Line-height: 150%
- Font-weight: 400
- Фон: белый
- Отступы: 32px
- Округление: 24px

### 3. Блок оценки
**Заголовок:**
- "Пожалуйста, оцените качество нашей работы"
- Шрифт: 24px, bold
- Нижняя граница: 1px solid #E6E6E6

**Контент:**
- Текст: "Ваша оценка займёт меньше минуты. Будем благодарны за обратную связь!"
- Кнопка: "ОЦЕНИТЬ СЕРВИС"
  - Цвет фона: `#FFDC83`
  - Padding: 25.5px 32px
  - Полная ширина
  - Uppercase
  - Letter-spacing: 0.5px
  - Округление: 8px
- Запасная ссылка: "Если кнопка не работает, перейдите по ссылке: nps.bvb-alyans.ru?id=12345"
  - Шрифт: 14px
  - Цвет: `#999999`
  - Ссылка: `#5B8DEF`

### 4. Блок помощи
**Заголовок:**
- "Если возник вопрос или нужна помощь, ответьте на это письмо или позвоните нам"
- Нижняя граница: 1px solid #E6E6E6

**Контент:**
- "Мы бережно относимся к персональным данным" (bold)
- "Пользовательское соглашение" (ссылка)
- "Политика конфиденциальности" (ссылка)

### 5. Футер
**Заголовок:**
- "Вы получили это письмо, потому что завершили сделку 12345 в БВБ-Альянс"
- Нижняя граница: 1px solid #E6E6E6

**Контент:**
- Слева: "2005-2025 БВБ-Альянс"
- Справа: "Отписаться от сервисных опросов" (ссылка)

## Кастомизация

### Замена данных
В шаблоне используются переменные, которые нужно заменить на реальные данные:

1. **Имя клиента**: `Тимофей` → `{{client_name}}`
2. **Номер заказа**: `12345` → `{{order_id}}`
3. **Ссылка на опрос**: `https://nps.bvb-alyans.ru?id=12345` → `https://nps.bvb-alyans.ru?id={{order_id}}`

### Замена логотипа
В текущей версии используется placeholder:
```html
<img src="https://via.placeholder.com/120x40/4A4953/FFFFFF?text=BVB+LOGO" ... />
```

Замените на реальный логотип:
```html
<img src="https://your-domain.com/path/to/logo.png" alt="БВБ-Альянс" width="120" height="40" ... />
```

**Требования к логотипу:**
- Формат: PNG или JPG
- Размер файла: не более 200 КБ
- Размеры: 120x40px (или пропорционально)
- Оптимизирован и сжат

### Изображения для email

Все изображения должны:
- Быть загружены на сервер (не использовать локальные пути)
- Использовать абсолютные URL (`https://...`)
- Иметь атрибуты `width` и `height`
- Быть сжаты (не более 200 КБ)
- Использовать форматы JPG или PNG

## Тестирование

### Рекомендуемые почтовые клиенты для тестирования:
- Gmail (веб, iOS, Android)
- Outlook (Windows, macOS, веб)
- Apple Mail (iOS, macOS)
- Yahoo Mail
- Mail.ru

### Инструменты для тестирования:
- [Litmus](https://litmus.com/) - платный сервис для тестирования email
- [Email on Acid](https://www.emailonacid.com/) - платный сервис
- [Mailtrap](https://mailtrap.io/) - бесплатный для небольших объемов
- [Putsmail](https://putsmail.com/) - бесплатный сервис для отправки тестовых писем

### Онлайн предпросмотр
Для быстрой проверки можно открыть HTML-файл в браузере.

## Примечания

### Особенности табличной верстки
1. **Spacing**: Используйте пустые ячейки `<td>` с `height` и `line-height` для вертикальных отступов
2. **Вложенность**: Таблицы внутри таблиц - нормальная практика для email
3. **Атрибуты**: Используйте атрибуты `border="0" cellpadding="0" cellspacing="0"` для всех таблиц
4. **Inline стили**: Все стили должны быть inline, стили в `<head>` могут не работать
5. **DOCTYPE**: Используется XHTML 1.0 Transitional для максимальной совместимости

### Ограничения email-клиентов
- Outlook не поддерживает `border-radius` (будут квадратные углы)
- Gmail удаляет некоторые CSS свойства из стилей
- Мобильные клиенты могут изменять размеры шрифтов
- Некоторые клиенты блокируют изображения по умолчанию

## Интеграция

Для интеграции с backend-системой:
1. Замените статические данные на переменные шаблонизатора
2. Загрузите логотип на CDN или сервер
3. Настройте SMTP или используйте email-сервис (SendGrid, Mailgun, AWS SES)
4. Добавьте tracking pixel для отслеживания открытий (опционально)
5. Реализуйте обработку ссылки "Отписаться"

## Поддержка

При возникновении проблем с отображением в конкретных email-клиентах:
1. Проверьте inline стили
2. Убедитесь, что используются только разрешенные CSS свойства
3. Проверьте корректность табличной структуры
4. Используйте валидатор: [W3C Validator](https://validator.w3.org/)
